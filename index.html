<!DOCTYPE html>
<html lang="hr">
<head>
<meta charset="UTF-8">
<title>Stablo srca</title>

<style>
body {
  margin: 0;
  height: 100vh;
  background: linear-gradient(135deg, #ff9a9e, #fad0c4);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: Arial, sans-serif;
}

.container {
  background: white;
  padding: 20px;
  border-radius: 18px;
  box-shadow: 0 20px 50px rgba(0,0,0,0.3);
  text-align: center;
}

canvas {
  margin-top: 15px;
  background: #fdfdfd;
  border-radius: 12px;
}

button {
  padding: 12px 20px;
  border: none;
  border-radius: 12px;
  background: #e74c3c;
  color: white;
  font-size: 16px;
  cursor: pointer;
}

button:hover {
  background: #c0392b;
}
</style>
</head>

<body>

<div class="container">
  <h2>üå≥ Stablo ljubavi</h2>
  <button onclick="start()">‚ù§Ô∏è Kreiraj</button>
  <canvas id="canvas" width="300" height="400"></canvas>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let progress = 0;
let hearts = [];

function start() {
  progress = 0;
  hearts = [];
  ctx.clearRect(0,0,canvas.width,canvas.height);
  requestAnimationFrame(draw);
}

function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawTrunk();
  drawBranches();

  if (progress < 1) {
    progress += 0.01;
    requestAnimationFrame(draw);
  } else {
    growHearts();
  }
}

function drawTrunk() {
  ctx.strokeStyle = "#6d4c41";
  ctx.lineWidth = 10;
  ctx.beginPath();
  ctx.moveTo(150, 380);
  ctx.lineTo(150, 380 - 200 * progress);
  ctx.stroke();
}

function drawBranches() {
  ctx.strokeStyle = "#6d4c41";
  ctx.lineWidth = 6;

  const baseY = 380 - 200 * progress;

  drawBranch(150, baseY, -40, -60);
  drawBranch(150, baseY, 40, -60);
}

function drawBranch(x, y, dx, dy) {
  ctx.beginPath();
  ctx.moveTo(x, y);
  ctx.lineTo(x + dx * progress, y + dy * progress);
  ctx.stroke();
}

function growHearts() {
  if (hearts.length < 8) {
    hearts.push({
      x: 150 + (Math.random() * 120 - 60),
      y: 100 + Math.random() * 80,
      size: 0
    });
  }

  ctx.clearRect(0,0,canvas.width,canvas.height);
  drawTrunk();
  drawBranches();

  hearts.forEach(h => {
    if (h.size < 1) h.size += 0.05;
    drawHeart(h.x, h.y, h.size);
  });

  if (hearts.some(h => h.size < 1)) {
    requestAnimationFrame(growHearts);
  }
}

function drawHeart(x, y, scale) {
  ctx.save();
  ctx.translate(x, y);
  ctx.scale(scale, scale);
  ctx.fillStyle = "#e74c3c";

  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.bezierCurveTo(-10, -10, -25, 10, 0, 25);
  ctx.bezierCurveTo(25, 10, 10, -10, 0, 0);
  ctx.fill();

  ctx.restore();
}
</script>

</body>
</html>
